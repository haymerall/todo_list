import json
import os

tasks = []
TODO_FILE = "to_do.json"
COMPLETE_FILE = "complete.json"

def load_tasks():
    global tasks
    to_do = []
    complete = []
    if os.path.exists(TODO_FILE):
        with open(TODO_FILE, "r") as f:
            to_do = json.load(f)
    if os.path.exists(COMPLETE_FILE):
        with open(COMPLETE_FILE, "r") as f:
            complete = json.load(f)
    tasks = to_do + complete

def save_tasks():
    to_do = [task for task in tasks if not task["completed"]]
    complete = [task for task in tasks if task["completed"]]
    with open(TODO_FILE, "w") as f:
        json.dump(to_do, f)
    with open(COMPLETE_FILE, "w") as f:
        json.dump(complete, f)

def add_task():
    task_desc = input("Enter the task: ")
    task = {"description": task_desc, "completed": False}
    tasks.append(task)
    save_tasks()
    print(f'Task "{task_desc}" added to the list!')

def list_tasks():
    if not tasks:
        print("No tasks in the list.")
    else:
        print("Tasks:")
        for idx, task in enumerate(tasks):
            status = "✓" if task["completed"] else "✗"
            print(f"{idx}. [{status}] {task['description']}")

def delete_task():
    list_tasks()
    try:
        tasktodelete = int(input("Enter the # to delete: "))
        if 0 <= tasktodelete < len(tasks):
            tasks.pop(tasktodelete)
            save_tasks()
            print(f"Task {tasktodelete} has been removed")
        else:
            print(f"task #{tasktodelete} was not found.")
    except:
        print("Invalid input. Please enter a valid task number.")

def mark_task_complete():
    list_tasks()
    try:
        tasknum = int(input("Enter the # to mark as complete: "))
        if 0 <= tasknum < len(tasks):
            tasks[tasknum]["completed"] = True
            save_tasks()
            print(f'Task {tasknum} marked as complete!')
        else:
            print(f"task #{tasknum} was not found.")
    except:
        print("Invalid input. Please enter a valid task number.")

if __name__ == "__main__":
    load_tasks()
    while True:
        print("\nTo-Do List Menu:")
        print("1. Add Task")
        print("2. List Tasks")
        print("3. Delete Task")
        print("4. Mark Task as Complete")
        print("5. Exit")
        choice = input("Enter your choice (1-5): ")
        if choice == "1":
            add_task()
        elif choice == "2":
            list_tasks()
        elif choice == "3":
            delete_task()
        elif choice == "4":
            mark_task_complete()
        elif choice == "5":
            print("Goodbye!")
            break
        else:
            print("Invalid choice. Please enter a number from 1 to 5.")




